import{b as W,r as p,u as G,j as t,a as w,L as _}from"./app-CH3-Qlzx.js";import{N as J,A as K}from"./NewsLayout-ZTpq4WNF.js";import{c as O,b as N,q as y}from"./index-IOC02BLR.js";import{l as X}from"./index-X7ulyn1n.js";import{u as Y}from"./useTranslations-CJy-ahEu.js";import{A as Z}from"./AttachmentsCarousel-Bkm1VFVP.js";import{u as ee}from"./Footer-COOOBpKR.js";import{C as $}from"./calendar-NmMPVRWY.js";import{M as f}from"./message-square-swyvWtzf.js";import{H as j}from"./heart-Cv31M4RU.js";import{U as te}from"./user-D9z3GZ0w.js";import{N as I}from"./index-DDrz1fMN.js";/* empty css            */import"./alert-dialog-D21eq74Q.js";import"./textarea-wmbd1RAa.js";import"./search-rll3j35G.js";import"./card-DJ1eNunt.js";import"./select-BJlFNWtB.js";import"./index-B9eMk7ev.js";import"./mail-D4E9GK1A.js";import"./separator-CNp-1pTj.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],re=O("Send",se),i=e=>({url:i.url(e),method:"get"});i.definition={methods:["get","head"],url:"/news"};i.url=e=>i.definition.url+y(e);i.get=e=>({url:i.url(e),method:"get"});i.head=e=>({url:i.url(e),method:"head"});const k=e=>({action:i.url(e),method:"get"});k.get=e=>({action:i.url(e),method:"get"});k.head=e=>({action:i.url({[e?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...e?.query??e?.mergeQuery??{}}}),method:"get"});i.form=k;const n=(e,r)=>({url:n.url(e,r),method:"get"});n.definition={methods:["get","head"],url:"/news/{news}"};n.url=(e,r)=>{(typeof e=="string"||typeof e=="number")&&(e={news:e}),typeof e=="object"&&!Array.isArray(e)&&"id"in e&&(e={news:e.id}),Array.isArray(e)&&(e={news:e[0]}),e=N(e);const l={news:typeof e.news=="object"?e.news.id:e.news};return n.definition.url.replace("{news}",l.news.toString()).replace(/\/+$/,"")+y(r)};n.get=(e,r)=>({url:n.url(e,r),method:"get"});n.head=(e,r)=>({url:n.url(e,r),method:"head"});const v=(e,r)=>({action:n.url(e,r),method:"get"});v.get=(e,r)=>({action:n.url(e,r),method:"get"});v.head=(e,r)=>({action:n.url(e,{[r?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...r?.query??r?.mergeQuery??{}}}),method:"get"});n.form=v;const d=(e,r)=>({url:d.url(e,r),method:"post"});d.definition={methods:["post"],url:"/news/{news}/comments"};d.url=(e,r)=>{(typeof e=="string"||typeof e=="number")&&(e={news:e}),typeof e=="object"&&!Array.isArray(e)&&"id"in e&&(e={news:e.id}),Array.isArray(e)&&(e={news:e[0]}),e=N(e);const l={news:typeof e.news=="object"?e.news.id:e.news};return d.definition.url.replace("{news}",l.news.toString()).replace(/\/+$/,"")+y(r)};d.post=(e,r)=>({url:d.url(e,r),method:"post"});const M=(e,r)=>({action:d.url(e,r),method:"post"});M.post=(e,r)=>({action:d.url(e,r),method:"post"});d.form=M;const o=(e,r)=>({url:o.url(e,r),method:"post"});o.definition={methods:["post"],url:"/news/{news}/like"};o.url=(e,r)=>{(typeof e=="string"||typeof e=="number")&&(e={news:e}),typeof e=="object"&&!Array.isArray(e)&&"id"in e&&(e={news:e.id}),Array.isArray(e)&&(e={news:e[0]}),e=N(e);const l={news:typeof e.news=="object"?e.news.id:e.news};return o.definition.url.replace("{news}",l.news.toString()).replace(/\/+$/,"")+y(r)};o.post=(e,r)=>({url:o.url(e,r),method:"post"});const E=(e,r)=>({action:o.url(e,r),method:"post"});E.post=(e,r)=>({action:o.url(e,r),method:"post"});o.form=E;function Ae(){const{t:e}=ee(),{i18n:r}=Y(),{props:l}=W(),c=l.news?.data??[],{auth:H}=l,P=!!H?.user,[x,b]=p.useState(void 0),[A,S]=p.useState("list"),{data:L,setData:Q,post:U,processing:C,reset:B}=G({comment:""});p.useEffect(()=>{c.length>0&&!x&&window.innerWidth>=1024&&b(c[0].id)},[c,x]),p.useEffect(()=>{r.changeLanguage("en")},[r]);const q=s=>{b(s),S("detail")},T=()=>{S("list"),b(void 0)},z=s=>{s.preventDefault(),x&&U(d({news:x}).url,{onSuccess:()=>{B("comment"),w.reload()}})},R=s=>{const m=new URLSearchParams;s.q&&m.set("q",s.q),s.type&&m.set("type",s.type),s.from&&m.set("from",s.from),s.to&&m.set("to",s.to);const g=m.toString();w.visit(`/news${g?`?${g}`:""}`)},u=x?c.find(s=>s.id===x):null,a=u?{...u,comments:u.comments||[],isLiked:u.isLiked||!1}:null;return t.jsx(J,{title:a?a.title:"News",newsItems:c,selectedNewsId:x,onNewsSelect:q,filters:l.filters,onFilterChange:R,showFilters:A==="list",children:A==="detail"&&a?t.jsxs("div",{className:"w-full h-full overflow-y-auto",children:[t.jsx("div",{className:"lg:hidden p-4",children:t.jsxs("button",{onClick:T,className:"inline-flex items-center text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300",children:[t.jsx(K,{className:"h-4 w-4 mr-2"}),"Back to News"]})}),t.jsxs("article",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-sm border border-gray-200 dark:border-slate-700 overflow-hidden mx-4 sm:mx-6 lg:mx-8",children:[t.jsx(Z,{title:a.title,images:a.attachments?.images,videos:a.attachments?.videos}),t.jsxs("div",{className:"p-6 lg:p-8",children:[t.jsxs("header",{className:"mb-6 lg:mb-8",children:[t.jsx("h1",{className:"text-2xl lg:text-3xl font-bold text-gray-900 dark:text-white mb-4",children:a.title}),t.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-500 dark:text-gray-400 mb-6",children:[a.createdAt&&t.jsxs("div",{className:"flex items-center",children:[t.jsx($,{className:"h-4 w-4 mr-2"}),new Date(a.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx(f,{className:"h-4 w-4 mr-2"}),a.comments.length," comments"]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx(j,{className:"h-4 w-4 mr-2"}),a.likesCount," likes"]})]})]}),t.jsx("div",{className:"prose prose-lg max-w-none text-gray-700 dark:text-gray-300 prose-headings:text-gray-900 dark:prose-headings:text-white prose-a:text-blue-600 dark:prose-a:text-blue-400",dangerouslySetInnerHTML:{__html:a.description}}),t.jsx("div",{className:"mt-6 lg:mt-8 pt-6 border-t border-gray-200 dark:border-slate-700",children:t.jsxs("button",{onClick:()=>w.post(o({news:a.id}).url),className:`inline-flex items-center px-4 py-2 rounded-lg text-sm font-medium transition-colors ${a.isLiked?"bg-red-100 dark:bg-red-900/20 text-red-700 dark:text-red-400 hover:bg-red-200 dark:hover:bg-red-900/30":"bg-gray-100 dark:bg-slate-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-slate-600"}`,children:[t.jsx(j,{className:`h-4 w-4 mr-2 ${a.isLiked?"fill-current":""}`}),a.isLiked?"Unlike":"Like"," (",a.likesCount,")"]})})]})]}),t.jsx("section",{className:"mt-8 lg:mt-12 px-4 sm:px-6 lg:px-8",children:t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-sm border border-gray-200 dark:border-slate-700 p-6 lg:p-8",children:[t.jsxs("h2",{className:"text-xl lg:text-2xl font-bold text-gray-900 dark:text-white mb-6 flex items-center",children:[t.jsx(f,{className:"h-5 w-5 lg:h-6 lg:w-6 mr-3 text-blue-600"}),"Comments (",a.comments.length,")"]}),P?t.jsx("form",{onSubmit:z,className:"mb-6 lg:mb-8",children:t.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[t.jsx("div",{className:"flex-1",children:t.jsx("textarea",{className:"w-full rounded-lg border border-gray-300 dark:border-slate-600 px-4 py-3 text-sm bg-white dark:bg-slate-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",rows:3,value:L.comment,onChange:s=>Q("comment",s.target.value),placeholder:"Write a comment...",required:!0})}),t.jsxs("button",{type:"submit",className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center sm:justify-start",disabled:C||!L.comment.trim(),children:[t.jsx(re,{className:"h-4 w-4 mr-2"}),C?"Posting...":"Post"]})]})}):t.jsx("div",{className:"mb-6 lg:mb-8 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:t.jsxs("p",{className:"text-blue-800 dark:text-blue-300",children:["Please ",t.jsx(_,{href:X().url,className:"font-medium underline hover:no-underline",children:"login"})," to comment."]})}),a.comments.length===0?t.jsxs("div",{className:"text-center py-6 lg:py-8 text-gray-500 dark:text-gray-400",children:[t.jsx(f,{className:"h-10 w-10 lg:h-12 lg:w-12 mx-auto mb-3 text-gray-300 dark:text-gray-600"}),t.jsx("p",{children:"No comments yet. Be the first to comment!"})]}):t.jsx("div",{className:"space-y-4 lg:space-y-6",children:a.comments.map(s=>t.jsxs("div",{className:"flex gap-3 lg:gap-4",children:[t.jsx("div",{className:"w-8 h-8 lg:w-10 lg:h-10 bg-blue-100 dark:bg-blue-900/20 rounded-full flex items-center justify-center flex-shrink-0",children:t.jsx(te,{className:"h-4 w-4 lg:h-5 lg:w-5 text-blue-600 dark:text-blue-400"})}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:s.author.name}),s.createdAt&&t.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:new Date(s.createdAt).toLocaleDateString()})]}),t.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:s.text})]})]},s.id))})]})})]}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"hidden lg:flex items-center justify-center h-full",children:t.jsxs("div",{className:"text-center max-w-md",children:[t.jsx(I,{className:"h-16 w-16 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),t.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Select a News Article"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Choose a news article from the sidebar to read the full content here."})]})}),t.jsxs("div",{className:"lg:hidden",children:[c.length===0?t.jsxs("div",{className:"text-center py-12 px-4",children:[t.jsx(I,{className:"h-16 w-16 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No news yet"}),t.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Check back later for updates."})]}):t.jsx("div",{className:"p-4 space-y-4",children:c.map(s=>t.jsx("article",{className:"group bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-gray-200 dark:border-slate-700 overflow-hidden hover:shadow-md transition-all",children:t.jsxs("button",{onClick:()=>q(s.id),className:"block w-full text-left",children:[(()=>{const m=s.attachments?.images??[],g=s.attachments?.videos??[],D=[...m.map(h=>({type:"image",order:h.order,data:h})),...g.map(h=>({type:"video",order:h.order,data:h}))].sort((h,V)=>h.order-V.order);if(D.length===0)return null;const F=D[0];return F.type==="image"?t.jsx("div",{className:"aspect-video bg-gray-100 dark:bg-slate-700 overflow-hidden",children:t.jsx("img",{src:F.data.url,alt:s.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"})}):t.jsx("div",{className:"aspect-video bg-gray-100 dark:bg-slate-700 flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"w-16 h-16 bg-blue-600 rounded-full flex items-center justify-center mb-2",children:t.jsx("svg",{className:"w-6 h-6 text-white ml-1",fill:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{d:"M8 5v14l11-7z"})})}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Video Content"})]})})})(),t.jsxs("div",{className:"p-6",children:[t.jsx("div",{className:"mb-2 flex items-center justify-between",children:t.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-gray-100 dark:bg-slate-700 text-gray-700 dark:text-gray-300 capitalize",children:[(s.attachments?.images?.length??0)+(s.attachments?.videos?.length??0)," attachments"]})}),t.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3 line-clamp-2",children:s.title}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4 line-clamp-3",children:s.description}),t.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500 dark:text-gray-400",children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(f,{className:"h-4 w-4 mr-1"}),s.commentsCount]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx(j,{className:"h-4 w-4 mr-1"}),s.likesCount]})]}),s.createdAt&&t.jsxs("div",{className:"flex items-center",children:[t.jsx($,{className:"h-4 w-4 mr-1"}),new Date(s.createdAt).toLocaleDateString()]})]})]})]})},s.id))}),l.news?.links&&l.news.links.length>3&&t.jsx("div",{className:"mt-8 flex justify-center px-4",children:t.jsx("nav",{className:"flex space-x-2",children:l.news.links.map((s,m)=>t.jsx(_,{href:s.url||"#",className:`px-3 py-2 text-sm font-medium rounded-md ${s.active?"bg-blue-600 text-white":"bg-white dark:bg-slate-800 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-slate-600 hover:bg-gray-50 dark:hover:bg-slate-700"} ${s.url?"":"opacity-50 cursor-not-allowed"}`,dangerouslySetInnerHTML:{__html:s.label}},m))})})]})]})})}export{Ae as default};
