import{u as ie,r as m,j as e,H as ne,a as g}from"./app-BNOx4n0Q.js";import{C as D,a as U,b as A,c as F,d as de}from"./card-CBbqZ_sk.js";import{B as oe}from"./badge-DmkRbq9F.js";import{B as x}from"./index-C8xIoliH.js";import{I as d}from"./input-Chyo32yl.js";import{L as o}from"./label-DqBnnaL2.js";import{A as ce,a as me,b as xe}from"./avatar-Bm8LPBwK.js";import{A as he,D as ue,a as je,b as pe,d as P}from"./app-layout-oS8XTSsV.js";import{S as V,a as q,b as B,c as H,d as t}from"./select-BfvKBw4i.js";import{D as M,e as ge,a as E,b as I,c as T,d as _}from"./dialog-CwwtUQBd.js";import{T as fe,a as we,b as $,c as w,d as ve,e as v}from"./table-Dxk6NV9k.js";import{P as Ne}from"./plus-hCaFR0Az.js";import{L as be}from"./loader-circle-CZmV5OCF.js";import{U as ye}from"./index-OF6NnHu5.js";import{S as z}from"./shield-aSQ1lSDc.js";import{U as O}from"./user-Bf8rlkoH.js";import{S as Ce}from"./search-CJB3hUea.js";import{M as Se}from"./mail-DbJ0qAIn.js";import{E as De}from"./ellipsis-YCmJDDC1.js";/* empty css            */import"./index-DkWml3F0.js";import"./index-BsHNLrDg.js";import"./log-out-Doq8TylV.js";import"./heart--apBCyVO.js";import"./message-square-Dv_EorgD.js";import"./index-BqF0WYZl.js";const Ue=[{title:"Dashboard",href:"/admin/dashboard"},{title:"Users",href:"/admin/users"}];function es({users:N,totalUsers:G,editorUsers:Q,guestUsers:J}){const K=s=>{const l={admin:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",editor:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",guest:"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"};return l[s]||l.guest},W=s=>({admin:z,editor:z,guest:O})[s]||O,{data:i,setData:a,post:X,processing:k,reset:R,errors:j,delete:Y}=ie({name:"",email:"",password:"",password_confirmation:"",role:"editor"}),[f,b]=m.useState({type:null,userId:null}),r=m.useMemo(()=>N.find(s=>s.id===f.userId)||null,[N,f.userId]),[L,Z]=m.useState(""),[y,ee]=m.useState("all"),[h,se]=m.useState(10),[ae,C]=m.useState(1),c=m.useMemo(()=>{const s=L.trim().toLowerCase();return N.filter(l=>{const n=!s||l.name.toLowerCase().includes(s)||l.email.toLowerCase().includes(s)||l.role.toLowerCase().includes(s),te=y==="all"||l.role===y;return n&&te})},[N,L,y]),S=Math.max(1,Math.ceil(c.length/h)),u=Math.min(ae,S),re=m.useMemo(()=>{const s=(u-1)*h;return c.slice(s,s+h)},[c,u,h]),p=()=>b({type:null,userId:null}),le=s=>{s.preventDefault(),X("/admin/users",{onSuccess:()=>{R("name","email","password","password_confirmation"),g.reload({only:["users","totalUsers"]})}})};return e.jsxs(he,{breadcrumbs:Ue,children:[e.jsx(ne,{title:"Admin - Users"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 p-4 sm:p-6",children:[e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"User Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage user accounts, roles, and permissions"})]}),e.jsxs(M,{children:[e.jsx(ge,{asChild:!0,children:e.jsxs(x,{className:"w-full sm:w-auto","aria-label":"Add editor",children:[e.jsx(Ne,{className:"mr-2 h-4 w-4"}),"Add Editor"]})}),e.jsxs(E,{children:[e.jsx(I,{children:e.jsx(T,{children:"Add a new editor"})}),e.jsxs("form",{className:"space-y-4",onSubmit:le,children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"name",children:"Full name"}),e.jsx(d,{id:"name",name:"name",value:i.name,onChange:s=>a("name",s.target.value),required:!0,autoFocus:!0}),j?.name&&e.jsx("p",{className:"text-sm text-red-600",children:j.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"email",children:"Email"}),e.jsx(d,{id:"email",type:"email",name:"email",value:i.email,onChange:s=>a("email",s.target.value),required:!0}),j?.email&&e.jsx("p",{className:"text-sm text-red-600",children:j.email})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"password",children:"Password"}),e.jsx(d,{id:"password",type:"password",name:"password",value:i.password,onChange:s=>a("password",s.target.value),required:!0}),j?.password&&e.jsx("p",{className:"text-sm text-red-600",children:j.password})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"password_confirmation",children:"Confirm password"}),e.jsx(d,{id:"password_confirmation",type:"password",name:"password_confirmation",value:i.password_confirmation,onChange:s=>a("password_confirmation",s.target.value),required:!0})]})]}),e.jsx(_,{children:e.jsx(x,{type:"submit",disabled:k,className:"w-full sm:w-auto",children:k?e.jsxs(e.Fragment,{children:[e.jsx(be,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating..."]}):"Create Editor"})})]})]})]})]}),e.jsxs("div",{className:"grid gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3",children:[e.jsxs(D,{children:[e.jsxs(U,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(A,{className:"text-sm font-medium",children:"Total Users"}),e.jsx(ye,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(F,{children:[e.jsx("div",{className:"text-2xl font-bold",children:G}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"All registered users"})]})]}),e.jsxs(D,{children:[e.jsxs(U,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(A,{className:"text-sm font-medium",children:"Editors"}),e.jsx(z,{className:"h-4 w-4 text-blue-600"})]}),e.jsxs(F,{children:[e.jsx("div",{className:"text-2xl font-bold",children:Q}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Users with editor privileges"})]})]}),e.jsxs(D,{children:[e.jsxs(U,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(A,{className:"text-sm font-medium",children:"Guests"}),e.jsx(O,{className:"h-4 w-4 text-gray-600"})]}),e.jsxs(F,{children:[e.jsx("div",{className:"text-2xl font-bold",children:J}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Users without elevated access"})]})]})]}),e.jsxs(D,{children:[e.jsxs(U,{children:[e.jsx(A,{children:"Users"}),e.jsx(de,{children:"A list of all users in the system"}),e.jsxs("div",{className:"flex items-center gap-2 max-sm:flex-col sm:justify-between",children:[e.jsxs("div",{className:"relative w-full sm:w-auto",children:[e.jsx(Ce,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(d,{placeholder:"Search users by name, email, or role...","aria-label":"Search users",value:L,onChange:s=>Z(s.target.value),className:"pl-8 w-full sm:w-[300px]"})]}),e.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[e.jsxs(V,{value:y,onValueChange:s=>{ee(s),C(1)},children:[e.jsx(q,{className:"w-[160px]",children:e.jsx(B,{placeholder:"Filter role"})}),e.jsxs(H,{children:[e.jsx(t,{value:"all",children:"All roles"}),e.jsx(t,{value:"admin",children:"Admin"}),e.jsx(t,{value:"editor",children:"Editor"}),e.jsx(t,{value:"guest",children:"Guest"})]})]}),e.jsxs(V,{value:String(h),onValueChange:s=>{se(Number(s)),C(1)},children:[e.jsx(q,{className:"w-[120px]",children:e.jsx(B,{placeholder:"Rows"})}),e.jsxs(H,{children:[e.jsx(t,{value:"5",children:"5 / page"}),e.jsx(t,{value:"10",children:"10 / page"}),e.jsx(t,{value:"20",children:"20 / page"}),e.jsx(t,{value:"50",children:"50 / page"})]})]})]})]})]}),e.jsx(F,{children:e.jsxs("div",{className:"space-y-4",children:[c.length===0&&e.jsx("div",{className:"text-center text-sm text-muted-foreground py-10",children:"No users found."}),c.length>0&&e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(fe,{children:[e.jsx(we,{children:e.jsxs($,{children:[e.jsx(w,{className:"w-[320px]",children:"User"}),e.jsx(w,{children:"Email"}),e.jsx(w,{children:"Role"}),e.jsx(w,{children:"Joined"}),e.jsx(w,{className:"text-right",children:"Actions"})]})}),e.jsx(ve,{children:re.map(s=>{const l=W(s.role);return e.jsxs($,{children:[e.jsx(v,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(ce,{children:[e.jsx(me,{src:s.avatar,alt:s.name}),e.jsx(xe,{children:s.name.split(" ").map(n=>n[0]).join("")})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.name}),e.jsxs("div",{className:"text-xs text-muted-foreground flex items-center",children:[e.jsx(Se,{className:"mr-1 h-3 w-3"}),s.email]})]})]})}),e.jsx(v,{className:"hidden sm:table-cell",children:s.email}),e.jsx(v,{children:e.jsxs(oe,{className:K(s.role),children:[e.jsx(l,{className:"mr-1 h-3 w-3"}),s.role]})}),e.jsx(v,{children:new Date(s.created_at).toLocaleDateString()}),e.jsx(v,{className:"text-right",children:s.role!=="admin"&&e.jsxs(ue,{children:[e.jsx(je,{asChild:!0,children:e.jsx(x,{variant:"ghost",className:"h-9 w-9 p-0","aria-label":`Open actions for ${s.name}`,children:e.jsx(De,{className:"h-4 w-4"})})}),e.jsxs(pe,{align:"end",children:[e.jsx(P,{onSelect:n=>{n.preventDefault(),a("name",s.name),a("email",s.email),a("password",""),a("password_confirmation",""),b({type:"edit",userId:s.id})},children:"Edit User"}),e.jsx(P,{onSelect:n=>{n.preventDefault(),a("role",s.role),b({type:"role",userId:s.id})},children:"Change Role"}),e.jsx(P,{className:"text-red-600",onSelect:n=>{n.preventDefault(),b({type:"delete",userId:s.id})},children:"Delete User"})]})]})})]},s.id)})})]})}),c.length>0&&e.jsxs("div",{className:"flex items-center justify-between gap-2 pt-2",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",(u-1)*h+1,"â€“",Math.min(u*h,c.length)," of ",c.length]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(x,{variant:"outline",size:"sm",onClick:()=>C(s=>Math.max(1,s-1)),disabled:u===1,children:"Previous"}),e.jsxs("div",{className:"text-sm",children:["Page ",u," of ",S]}),e.jsx(x,{variant:"outline",size:"sm",onClick:()=>C(s=>Math.min(S,s+1)),disabled:u===S,children:"Next"})]})]})]})})]}),e.jsx(M,{open:f.type==="edit",onOpenChange:s=>{s||p()},children:e.jsxs(E,{children:[e.jsx(I,{children:e.jsx(T,{children:"Edit user"})}),e.jsxs("form",{className:"space-y-4",onSubmit:s=>{s.preventDefault(),r&&g.put(`/admin/users/${r.id}`,{name:i.name||r.name,email:i.email||r.email,password:i.password,password_confirmation:i.password_confirmation},{onSuccess:()=>{R("name","email","password","password_confirmation"),g.reload({only:["users"]}),p()}})},children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"name-edit",children:"Full name"}),e.jsx(d,{id:"name-edit",defaultValue:r?.name,onChange:s=>a("name",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"email-edit",children:"Email"}),e.jsx(d,{id:"email-edit",type:"email",defaultValue:r?.email,onChange:s=>a("email",s.target.value)})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"password-edit",children:"New password (optional)"}),e.jsx(d,{id:"password-edit",type:"password",onChange:s=>a("password",s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"password2-edit",children:"Confirm password"}),e.jsx(d,{id:"password2-edit",type:"password",onChange:s=>a("password_confirmation",s.target.value)})]})]}),e.jsx(_,{children:e.jsx(x,{type:"submit",disabled:k,children:"Save changes"})})]})]})}),e.jsx(M,{open:f.type==="role",onOpenChange:s=>{s||p()},children:e.jsxs(E,{children:[e.jsx(I,{children:e.jsx(T,{children:"Change role"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{children:"Role"}),e.jsxs(V,{defaultValue:r?.role==="admin"?"editor":r?.role,onValueChange:s=>a("role",s),children:[e.jsx(q,{children:e.jsx(B,{placeholder:"Select a role"})}),e.jsxs(H,{children:[e.jsx(t,{value:"editor",children:"Editor"}),e.jsx(t,{value:"guest",children:"Guest"})]})]})]}),e.jsx(_,{children:e.jsx(x,{onClick:()=>{r&&g.put(`/admin/users/${r.id}/role`,{role:i.role||r.role},{onSuccess:()=>{R("role"),g.reload({only:["users"]}),p()}})},children:"Update role"})})]})]})}),e.jsx(M,{open:f.type==="delete",onOpenChange:s=>{s||p()},children:e.jsxs(E,{children:[e.jsx(I,{children:e.jsx(T,{children:"Delete user"})}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["This action is irreversible. Are you sure you want to delete ",r?.name,"?"]}),e.jsx(_,{children:e.jsx(x,{variant:"destructive",onClick:()=>{r&&Y(`/admin/users/${r.id}`,{onSuccess:()=>{g.reload({only:["users","totalUsers"]}),p()}})},children:"Delete"})})]})})]})]})}export{es as default};
