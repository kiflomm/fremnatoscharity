import{b as p,u,j as e,L as a,a as h}from"./app-grFH0y_I.js";import{F as j}from"./FixedHeaderLayout-B3y89L4I.js";import{i as f,l as N,c as g}from"./index-dzeT7arT.js";import{l as b}from"./index-BWNQUpWz.js";/* empty css            */import"./Footer-Dtd0Z2WV.js";import"./card-Cf-XHSRP.js";import"./index-BJmqIARy.js";import"./select-C3bGNm-l.js";import"./index-DtUGWkcR.js";import"./index-J5NUqSLF.js";import"./mail-nkrTxJmr.js";import"./separator-8u6lgZVG.js";import"./alert-dialog-D9-ipAgY.js";import"./textarea-BzeD8NAf.js";function G(){const{props:r}=p(),{story:t,auth:m}=r,{data:i,setData:o,post:l,processing:n,reset:c}=u({comment:""}),d=!!m?.user,x=s=>{s.preventDefault(),l(g({story:t.id}).url,{onSuccess:()=>c("comment")})};return e.jsx(j,{title:t.title,children:e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsx(a,{href:f().url,className:"text-sm text-blue-600",children:"← Back"}),e.jsx("h1",{className:"text-2xl font-semibold mt-2",children:t.title}),e.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:["Beneficiary: ",t.beneficiary.name," (",t.beneficiary.ageGroup,", ",t.beneficiary.gender,")"]}),e.jsx("article",{className:"prose max-w-none mt-4",dangerouslySetInnerHTML:{__html:t.description}}),e.jsx("div",{className:"mt-6 flex items-center gap-4",children:e.jsxs("button",{onClick:()=>h.post(N({story:t.id}).url),className:"rounded border px-3 py-1 text-sm",children:[t.isLiked?"Unlike":"Like"," (",t.likesCount,")"]})}),e.jsxs("section",{className:"mt-8",children:[e.jsx("h2",{className:"text-lg font-medium",children:"Comments"}),d?e.jsxs("form",{onSubmit:x,className:"mt-3 flex gap-2",children:[e.jsx("input",{className:"flex-1 rounded border px-3 py-2",value:i.comment,onChange:s=>o("comment",s.target.value),placeholder:"Write a comment"}),e.jsx("button",{className:"rounded bg-blue-600 text-white px-4",disabled:n,children:"Post"})]}):e.jsxs("p",{className:"mt-3 text-sm text-gray-600",children:["Please ",e.jsx(a,{href:b().url,className:"text-blue-600",children:"login"})," to comment."]}),e.jsx("ul",{className:"mt-4 space-y-3",children:t.comments.map(s=>e.jsxs("li",{className:"rounded border p-3",children:[e.jsx("div",{className:"text-sm text-gray-500",children:s.author.name}),e.jsx("div",{className:"mt-1",children:s.text})]},s.id))})]})]})})})}export{G as default};
