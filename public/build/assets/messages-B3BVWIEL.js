import{j as e,H as p,a as r}from"./app-BNOx4n0Q.js";import{A as g}from"./app-layout-oS8XTSsV.js";import{C as u,c as j}from"./card-CBbqZ_sk.js";import{c as o,B as t}from"./index-C8xIoliH.js";import{B as i}from"./badge-DmkRbq9F.js";import{t as s}from"./index-OF6NnHu5.js";import{M as l}from"./mail-DbJ0qAIn.js";import{E as f}from"./eye-off-BNknAAOR.js";import{E as v}from"./eye-D3gPgUG0.js";import{T as k}from"./trash-2-s1xiJiE6.js";/* empty css            */import"./index-DkWml3F0.js";import"./avatar-Bm8LPBwK.js";import"./index-BsHNLrDg.js";import"./log-out-Doq8TylV.js";import"./heart--apBCyVO.js";import"./message-square-Dv_EorgD.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N=[["path",{d:"M22 13V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v12c0 1.1.9 2 2 2h8",key:"12jkf8"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}],["path",{d:"m16 19 2 2 4-4",key:"1b14m6"}]],b=o("MailCheck",N);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=[["path",{d:"M21.2 8.4c.5.38.8.97.8 1.6v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V10a2 2 0 0 1 .8-1.6l8-6a2 2 0 0 1 2.4 0l8 6Z",key:"1jhwl8"}],["path",{d:"m22 10-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 10",key:"1qfld7"}]],w=o("MailOpen",M),y=[{title:"Dashboard",href:"/admin/dashboard"},{title:"Manage Messages",href:"/admin/messages"}];function q({messages:n}){const c=a=>{r.delete(`/admin/messages/${a}`,{onSuccess:()=>{s.success("Message deleted successfully")},onError:()=>{s.error("Failed to delete message")}})},m=a=>{r.patch(`/admin/messages/${a}/read`,{},{onSuccess:()=>{s.success("Message marked as read")},onError:()=>{s.error("Failed to mark message as read")}})},h=a=>{r.patch(`/admin/messages/${a}/unread`,{},{onSuccess:()=>{s.success("Message marked as unread")},onError:()=>{s.error("Failed to mark message as unread")}})},x=()=>{r.patch("/admin/messages/mark-all-read",{},{onSuccess:()=>{s.success("All messages marked as read")},onError:()=>{s.error("Failed to mark all messages as read")}})},d=n.data.filter(a=>!a.is_read).length;return e.jsxs(g,{breadcrumbs:y,children:[e.jsx(p,{title:"Admin - Manage Messages"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 p-4 sm:p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold tracking-tight flex items-center gap-2",children:[e.jsx(l,{className:"h-6 w-6"})," Manage Messages"]}),e.jsx("p",{className:"text-muted-foreground",children:"View and manage contact messages."})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[d>0&&e.jsxs(i,{variant:"destructive",className:"text-sm",children:[d," unread"]}),d>0&&e.jsxs(t,{onClick:x,variant:"outline",size:"sm",children:[e.jsx(b,{className:"h-4 w-4 mr-1"}),"Mark All Read"]})]})]}),e.jsx("div",{className:"grid gap-4",children:n.data.map(a=>e.jsx(u,{className:`${a.is_read?"":"border-l-4 border-l-blue-500 bg-blue-50/50 dark:bg-blue-950/20"}`,children:e.jsxs(j,{className:"p-4 flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["From: ",a.name??"Anonymous"," ",a.email?`<${a.email}>`:""]}),e.jsx(i,{variant:a.is_read?"secondary":"default",className:"text-xs",children:a.is_read?e.jsxs(e.Fragment,{children:[e.jsx(w,{className:"h-3 w-3 mr-1"}),"Read"]}):e.jsxs(e.Fragment,{children:[e.jsx(l,{className:"h-3 w-3 mr-1"}),"Unread"]})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[a.is_read?e.jsxs(t,{size:"sm",variant:"outline",onClick:()=>h(a.id),className:"hover:bg-orange-50 hover:border-orange-300 hover:text-orange-700 dark:hover:bg-orange-900/20 dark:hover:border-orange-700 dark:hover:text-orange-300",children:[e.jsx(f,{className:"h-4 w-4 mr-1"}),"Mark Unread"]}):e.jsxs(t,{size:"sm",variant:"outline",onClick:()=>m(a.id),className:"hover:bg-green-50 hover:border-green-300 hover:text-green-700 dark:hover:bg-green-900/20 dark:hover:border-green-700 dark:hover:text-green-300",children:[e.jsx(v,{className:"h-4 w-4 mr-1"}),"Mark Read"]}),e.jsxs(t,{size:"sm",variant:"destructive",onClick:()=>c(a.id),children:[e.jsx(k,{className:"h-4 w-4 mr-1"})," Delete"]})]})]}),e.jsx("div",{className:"whitespace-pre-wrap text-sm leading-6",children:a.message}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[e.jsx("div",{children:a.created_at&&e.jsxs("span",{children:["Sent: ",new Date(a.created_at).toLocaleString()]})}),e.jsx("div",{children:a.read_at&&e.jsxs("span",{children:["Read: ",new Date(a.read_at).toLocaleString()]})})]})]})},a.id))})]})]})}export{q as default};
