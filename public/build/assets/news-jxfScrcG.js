import{r as o,u as ge,j as e,H as we,a as d}from"./app-wVpjM_Nk.js";import{C as J,a as X,b as Z,c as ee,d as fe}from"./card-CGZKi39q.js";import{B as l}from"./index-BY0DeOZ3.js";import{I as C,L as x}from"./label-B8PTkBuR.js";import{A as ve,D as Ne,a as ye,b as be,d as _}from"./app-layout-s9lILmSr.js";import{D as se,a as te,b as ne,c as ae,d as ie}from"./dialog-C-P_W27A.js";import{A as O,a as q,b as H,c as R,d as V,e as B,f as K,g as Y}from"./alert-dialog-DunxIUdu.js";import{T as le}from"./textarea-BqUX4hsj.js";import{P as Ce,E as _e}from"./plus-CJvZT1S0.js";import{N as ke}from"./index-B_IgmGSB.js";import{S as De}from"./search-Cx-7Ya6m.js";import{U as Se}from"./user-D6mZ1ceA.js";import{C as Ae}from"./calendar-Ccyl5jZg.js";import{M as Ie}from"./message-square-Ci_Kvfwa.js";import{H as Ee}from"./heart-CsAA20Wh.js";import{I as re}from"./image-BcrNkgVZ.js";import{U as ce,A as k,a as D,V as oe,C as de}from"./video-t24RAftc.js";import{T as S}from"./trash-2-Bn9brf5u.js";/* empty css            */import"./index-ii9NU5RA.js";import"./avatar-Dtbf_utt.js";import"./index-CFm55Yc-.js";import"./log-out-BQgglRgp.js";const ze=[{title:"Dashboard",href:"/admin/dashboard"},{title:"News",href:"/admin/news"}];function ns({posts:z,totalPosts:me}){const[he,T]=o.useState(!1),[U,g]=o.useState(null),[P,w]=o.useState(null),[L,f]=o.useState(null),[$,v]=o.useState(null),[A,ue]=o.useState(""),{data:r,setData:j,post:Te,processing:M,reset:pe,errors:p,clearErrors:xe}=ge({news_title:"",news_description:"",attachment_type:"none",attachment_url:""}),[N,m]=o.useState([]),[I,h]=o.useState([]),[Q,y]=o.useState([]),[E,b]=o.useState([]),[u,c]=o.useState([]),W=o.useMemo(()=>!!(r.news_title?.trim()?.length>0&&r.news_description?.trim()?.length>0),[r]),G=o.useMemo(()=>{if(!A.trim())return z;const a=A.toLowerCase();return z.filter(s=>s.title.toLowerCase().includes(a)||s.content.toLowerCase().includes(a)||s.author.name.toLowerCase().includes(a))},[z,A]),F=()=>{T(!1),xe(),pe("news_title","news_description"),m([]),h([]),c([])},je=(a,s)=>a.length<=s?a:a.substring(0,s)+"...";return e.jsxs(ve,{breadcrumbs:ze,children:[e.jsx(we,{title:"Admin - News"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 p-4 sm:p-6",children:[e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"News Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage news and announcements"})]}),e.jsxs(l,{className:"w-full sm:w-auto",onClick:()=>T(!0),children:[e.jsx(Ce,{className:"mr-2 h-4 w-4"}),"Add news"]})]}),e.jsx("div",{className:"grid gap-4 md:grid-cols-3",children:e.jsxs(J,{children:[e.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(Z,{className:"text-sm font-medium",children:"Total News"}),e.jsx(ke,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ee,{children:[e.jsx("div",{className:"text-2xl font-bold",children:me}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"All news"})]})]})}),e.jsxs(J,{children:[e.jsxs(X,{children:[e.jsx(Z,{children:"News"}),e.jsx(fe,{children:"Manage news and announcements"}),e.jsx("div",{className:"flex items-center gap-2 max-sm:flex-col sm:justify-between",children:e.jsxs("div",{className:"relative w-full sm:w-auto",children:[e.jsx(De,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(C,{placeholder:"Search by title, content, author...",className:"pl-8 w-full sm:w-[300px]",value:A,onChange:a=>ue(a.target.value)})]})})]}),e.jsx(ee,{children:e.jsxs("div",{className:"space-y-4",children:[G.length===0?e.jsx("div",{className:"text-sm text-muted-foreground p-4 border rounded-md",children:"No news match your search."}):null,G.map(a=>e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start justify-between gap-3 p-4 border rounded-lg hover:bg-muted/50 transition-colors",children:[e.jsx("div",{className:"flex items-start gap-4 flex-1",children:e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("h3",{className:"font-medium text-lg",children:a.title}),a.archived&&e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",children:"Archived"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:je(a.excerpt||a.content,150)}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Se,{className:"mr-1 h-3 w-3"}),a.author.name]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ae,{className:"mr-1 h-3 w-3"}),a.published_at?new Date(a.published_at).toLocaleDateString():new Date(a.created_at).toLocaleDateString()]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ie,{className:"mr-1 h-3 w-3"}),a.comments_count," comments"]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ee,{className:"mr-1 h-3 w-3"}),a.likes_count??0," likes"]})]})]})}),e.jsxs("div",{className:"flex sm:hidden w-full justify-around",children:[e.jsx(l,{variant:"outline",size:"sm",onClick:()=>d.get(`/admin/news/${a.id}`),children:"View"}),e.jsx(l,{variant:"outline",size:"sm",onClick:()=>{g(a.id),j({...r,news_title:a.title,news_description:a.content});const s=(a.attachments?.images??[]).slice().sort((n,t)=>n.order-t.order);y(s.map(n=>n.id)),b(s.map(n=>n.url)),h([]),m([]),c((a.attachments?.videos??[]).slice().sort((n,t)=>n.order-t.order).map(n=>n.embedUrl))},children:"Edit"}),a.archived?e.jsx(l,{variant:"outline",size:"sm",onClick:()=>v(a.id),children:"Unarchive"}):e.jsx(l,{variant:"outline",size:"sm",onClick:()=>f(a.id),children:"Archive"}),e.jsx(l,{variant:"destructive",size:"sm",onClick:()=>w(a.id),children:"Delete"})]}),e.jsx("div",{className:"hidden sm:block",children:e.jsxs(Ne,{children:[e.jsx(ye,{asChild:!0,children:e.jsx(l,{variant:"ghost",className:"h-8 w-8 p-0",children:e.jsx(_e,{className:"h-4 w-4"})})}),e.jsxs(be,{align:"end",children:[e.jsx(_,{onClick:()=>d.get(`/admin/news/${a.id}`),children:"View News"}),e.jsx(_,{onClick:()=>{g(a.id),j({...r,news_title:a.title,news_description:a.content});const s=(a.attachments?.images??[]).slice().sort((n,t)=>n.order-t.order);y(s.map(n=>n.id)),b(s.map(n=>n.url)),h([]),m([]),c((a.attachments?.videos??[]).slice().sort((n,t)=>n.order-t.order).map(n=>n.embedUrl))},children:"Edit News"}),a.archived?e.jsx(_,{onClick:()=>v(a.id),children:"Unarchive News"}):e.jsx(_,{onClick:()=>f(a.id),children:"Archive News"}),e.jsx(_,{className:"text-red-600",onClick:()=>w(a.id),children:"Delete News"})]})]})})]},a.id))]})})]}),e.jsx(se,{open:he,onOpenChange:a=>{a?T(!0):F()},children:e.jsxs(te,{className:"sm:max-w-3xl max-h-[85vh] overflow-y-auto",children:[e.jsx(ne,{children:e.jsx(ae,{children:"Add news"})}),e.jsxs("form",{className:"space-y-4",onSubmit:a=>{if(a.preventDefault(),!W)return;const s=new FormData;s.append("news_title",r.news_title),s.append("news_description",r.news_description),N.forEach((n,t)=>{s.append("images[]",n)}),N.forEach((n,t)=>{s.append("images_order[]",String(t))}),u.forEach((n,t)=>{s.append("videos[]",n)}),u.forEach((n,t)=>{s.append("videos_order[]",String(t))}),d.post("/admin/news",s,{onSuccess:()=>{F(),d.reload({only:["posts","totalPosts"]})}})},children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"news-title",children:"Title"}),e.jsx(C,{id:"news-title",value:r.news_title,onChange:a=>j("news_title",a.target.value),placeholder:"Enter a concise title",required:!0}),p.news_title?e.jsx("p",{className:"text-xs text-red-600",children:p.news_title}):null]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"news-content",children:"Content"}),e.jsx(le,{id:"news-content",value:r.news_description,onChange:a=>j("news_description",a.target.value),placeholder:"Write the news content...",rows:6,required:!0}),p.news_description?e.jsx("p",{className:"text-xs text-red-600",children:p.news_description}):null]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(re,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(x,{className:"m-0",children:"Images"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"Upload one or more images"})]}),e.jsxs("div",{className:"rounded-lg border border-dashed p-4 text-center hover:bg-muted/30 transition cursor-pointer",onClick:()=>{document.getElementById("news-images-input")?.click()},children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 text-muted-foreground",children:[e.jsx(ce,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm",children:"Click to choose files"})]}),e.jsx("input",{id:"news-images-input",type:"file",className:"hidden",accept:"image/*",multiple:!0,onChange:a=>{const s=Array.from(a.target.files||[]);if(s.length===0)return;m(t=>[...t,...s]);const n=s.map(t=>URL.createObjectURL(t));h(t=>[...t,...n])}})]}),I.length>0&&e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3",children:I.map((a,s)=>e.jsxs("div",{className:"relative group border rounded-lg overflow-hidden",children:[e.jsx("img",{src:a,alt:`preview-${s}`,className:"w-full h-32 object-cover"}),e.jsx("div",{className:"absolute left-2 top-2 text-[10px] font-medium px-1.5 py-0.5 rounded bg-black/60 text-white",children:s+1}),e.jsxs("div",{className:"absolute inset-x-0 bottom-0 p-1.5 flex items-center justify-between bg-gradient-to-t from-black/60 to-transparent opacity-0 group-hover:opacity-100 transition",children:[e.jsxs("div",{className:"flex gap-1",children:[e.jsx(l,{type:"button",size:"icon",variant:"secondary",className:"h-7 w-7",onClick:()=>{s<=0||(m(n=>{const t=[...n],[i]=t.splice(s,1);return t.splice(s-1,0,i),t}),h(n=>{const t=[...n],[i]=t.splice(s,1);return t.splice(s-1,0,i),t}))},children:e.jsx(k,{className:"h-3.5 w-3.5"})}),e.jsx(l,{type:"button",size:"icon",variant:"secondary",className:"h-7 w-7",onClick:()=>{s>=N.length-1||(m(n=>{const t=[...n],[i]=t.splice(s,1);return t.splice(s+1,0,i),t}),h(n=>{const t=[...n],[i]=t.splice(s,1);return t.splice(s+1,0,i),t}))},children:e.jsx(D,{className:"h-3.5 w-3.5"})})]}),e.jsx(l,{type:"button",size:"icon",variant:"destructive",className:"h-7 w-7",onClick:()=>{m(n=>n.filter((t,i)=>i!==s)),h(n=>n.filter((t,i)=>i!==s))},children:e.jsx(S,{className:"h-3.5 w-3.5"})})]})]},s))}),p.images&&e.jsx("p",{className:"text-xs text-red-600",children:String(p.images)})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(oe,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(x,{className:"m-0",children:"YouTube videos"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"Paste one or more URLs"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(C,{placeholder:"https://youtube.com/watch?v=...",onKeyDown:a=>{const s=a.target;if(a.key==="Enter"){a.preventDefault();const n=s.value.trim();n&&(c(t=>[...t,n]),s.value="")}}}),e.jsxs(l,{type:"button",variant:"secondary",onClick:a=>{const s=a.currentTarget.previousSibling;if(s&&"value"in s){const n=s.value.trim();n&&(c(t=>[...t,n]),s.value="")}},children:[e.jsx(de,{className:"h-4 w-4 mr-1"})," Add"]})]}),u.length>0&&e.jsx("div",{className:"space-y-2 mt-1",children:u.map((a,s)=>e.jsxs("div",{className:"flex items-center gap-2 border rounded-md p-2",children:[e.jsx("div",{className:"text-[10px] font-medium px-1.5 py-0.5 rounded bg-muted",children:s+1}),e.jsx("div",{className:"flex-1 truncate text-sm",title:a,children:a}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(l,{type:"button",size:"icon",variant:"secondary",className:"h-7 w-7",onClick:()=>{s<=0||c(n=>{const t=[...n],[i]=t.splice(s,1);return t.splice(s-1,0,i),t})},children:e.jsx(k,{className:"h-3.5 w-3.5"})}),e.jsx(l,{type:"button",size:"icon",variant:"secondary",className:"h-7 w-7",onClick:()=>{s>=u.length-1||c(n=>{const t=[...n],[i]=t.splice(s,1);return t.splice(s+1,0,i),t})},children:e.jsx(D,{className:"h-3.5 w-3.5"})}),e.jsx(l,{type:"button",size:"icon",variant:"destructive",className:"h-7 w-7",onClick:()=>c(n=>n.filter((t,i)=>i!==s)),children:e.jsx(S,{className:"h-3.5 w-3.5"})})]})]},s))})]})]}),e.jsxs(ie,{children:[e.jsx(l,{type:"button",variant:"ghost",onClick:F,disabled:M,children:"Cancel"}),e.jsx(l,{type:"submit",disabled:!W||M,children:M?"Creating...":"Create news"})]})]})]})}),e.jsx(se,{open:U!==null,onOpenChange:a=>{a||g(null)},children:e.jsxs(te,{className:"sm:max-w-3xl max-h-[85vh] overflow-y-auto",children:[e.jsx(ne,{children:e.jsx(ae,{children:"Edit news"})}),e.jsxs("form",{className:"space-y-4",onSubmit:a=>{if(a.preventDefault(),U===null||!r.news_title.trim()||!r.news_description.trim())return;const s=new FormData;s.append("_method","put"),s.append("news_title",r.news_title),s.append("news_description",r.news_description),s.append("existing_images_provided","1"),Q.forEach(n=>s.append("existing_image_ids[]",String(n))),Q.forEach((n,t)=>s.append("existing_images_order[]",String(t))),N.forEach((n,t)=>{s.append("images[]",n),s.append("images_order[]",String(t))}),s.append("replace_videos","1"),u.forEach((n,t)=>{s.append("videos[]",n),s.append("videos_order[]",String(t))}),d.post(`/admin/news/${U}`,s,{onSuccess:()=>{g(null),d.reload({only:["posts"]})}})},children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"news-title-edit",children:"Title"}),e.jsx(C,{id:"news-title-edit",value:r.news_title,onChange:a=>j("news_title",a.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"news-content-edit",children:"Content"}),e.jsx(le,{id:"news-content-edit",value:r.news_description,onChange:a=>j("news_description",a.target.value),rows:6,required:!0})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Add images or videos to replace existing attachments. Leave empty to keep current attachments."}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(re,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(x,{className:"m-0",children:"Images"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"Upload one or more images"})]}),e.jsxs("div",{className:"rounded-lg border border-dashed p-4 text-center hover:bg-muted/30 transition cursor-pointer",onClick:()=>{document.getElementById("news-images-input-edit")?.click()},children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 text-muted-foreground",children:[e.jsx(ce,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm",children:"Click to choose files"})]}),e.jsx("input",{id:"news-images-input-edit",type:"file",className:"hidden",accept:"image/*",multiple:!0,onChange:a=>{const s=Array.from(a.target.files||[]);if(s.length===0)return;m(t=>[...t,...s]);const n=s.map(t=>URL.createObjectURL(t));h(t=>[...t,...n])}})]}),E.length>0&&e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3",children:E.map((a,s)=>e.jsxs("div",{className:"relative group border rounded-lg overflow-hidden",children:[e.jsx("img",{src:a,alt:`preview-${s}`,className:"w-full h-32 object-cover"}),e.jsx("div",{className:"absolute left-2 top-2 text-[10px] font-medium px-1.5 py-0.5 rounded bg-black/60 text-white",children:s+1}),e.jsxs("div",{className:"absolute inset-x-0 bottom-0 p-1.5 flex items-center justify-between bg-gradient-to-t from-black/60 to-transparent opacity-0 group-hover:opacity-100 transition",children:[e.jsxs("div",{className:"flex gap-1",children:[e.jsx(l,{type:"button",size:"icon",variant:"secondary",className:"h-7 w-7",onClick:()=>{s<=0||(b(n=>{const t=[...n],[i]=t.splice(s,1);return t.splice(s-1,0,i),t}),y(n=>{const t=[...n],[i]=t.splice(s,1);return t.splice(s-1,0,i),t}))},children:e.jsx(k,{className:"h-3.5 w-3.5"})}),e.jsx(l,{type:"button",size:"icon",variant:"secondary",className:"h-7 w-7",onClick:()=>{s>=E.length-1||(b(n=>{const t=[...n],[i]=t.splice(s,1);return t.splice(s+1,0,i),t}),y(n=>{const t=[...n],[i]=t.splice(s,1);return t.splice(s+1,0,i),t}))},children:e.jsx(D,{className:"h-3.5 w-3.5"})})]}),e.jsx(l,{type:"button",size:"icon",variant:"destructive",className:"h-7 w-7",onClick:()=>{b(n=>n.filter((t,i)=>i!==s)),y(n=>n.filter((t,i)=>i!==s))},children:e.jsx(S,{className:"h-3.5 w-3.5"})})]})]},`edit-${s}`))}),I.length>0&&e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3",children:I.map((a,s)=>e.jsxs("div",{className:"relative group border rounded-lg overflow-hidden",children:[e.jsx("img",{src:a,alt:`new-preview-${s}`,className:"w-full h-32 object-cover"}),e.jsx("div",{className:"absolute left-2 top-2 text-[10px] font-medium px-1.5 py-0.5 rounded bg-black/60 text-white",children:s+1+E.length}),e.jsxs("div",{className:"absolute inset-x-0 bottom-0 p-1.5 flex items-center justify-between bg-gradient-to-t from-black/60 to-transparent opacity-0 group-hover:opacity-100 transition",children:[e.jsxs("div",{className:"flex gap-1",children:[e.jsx(l,{type:"button",size:"icon",variant:"secondary",className:"h-7 w-7",onClick:()=>{s<=0||(m(n=>{const t=[...n],[i]=t.splice(s,1);return t.splice(s-1,0,i),t}),h(n=>{const t=[...n],[i]=t.splice(s,1);return t.splice(s-1,0,i),t}))},children:e.jsx(k,{className:"h-3.5 w-3.5"})}),e.jsx(l,{type:"button",size:"icon",variant:"secondary",className:"h-7 w-7",onClick:()=>{s>=N.length-1||(m(n=>{const t=[...n],[i]=t.splice(s,1);return t.splice(s+1,0,i),t}),h(n=>{const t=[...n],[i]=t.splice(s,1);return t.splice(s+1,0,i),t}))},children:e.jsx(D,{className:"h-3.5 w-3.5"})})]}),e.jsx(l,{type:"button",size:"icon",variant:"destructive",className:"h-7 w-7",onClick:()=>{m(n=>n.filter((t,i)=>i!==s)),h(n=>n.filter((t,i)=>i!==s))},children:e.jsx(S,{className:"h-3.5 w-3.5"})})]})]},`new-${s}`))}),p.images&&e.jsx("p",{className:"text-xs text-red-600",children:String(p.images)})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(oe,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(x,{className:"m-0",children:"YouTube videos"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"Paste one or more URLs"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(C,{placeholder:"https://youtube.com/watch?v=...",onKeyDown:a=>{const s=a.target;if(a.key==="Enter"){a.preventDefault();const n=s.value.trim();n&&(c(t=>[...t,n]),s.value="")}}}),e.jsxs(l,{type:"button",variant:"secondary",onClick:a=>{const s=a.currentTarget.previousSibling;if(s&&"value"in s){const n=s.value.trim();n&&(c(t=>[...t,n]),s.value="")}},children:[e.jsx(de,{className:"h-4 w-4 mr-1"})," Add"]})]}),u.length>0&&e.jsx("div",{className:"space-y-2 mt-1",children:u.map((a,s)=>e.jsxs("div",{className:"flex items-center gap-2 border rounded-md p-2",children:[e.jsx("div",{className:"text-[10px] font-medium px-1.5 py-0.5 rounded bg-muted",children:s+1}),e.jsx("div",{className:"flex-1 truncate text-sm",title:a,children:a}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(l,{type:"button",size:"icon",variant:"secondary",className:"h-7 w-7",onClick:()=>{s<=0||c(n=>{const t=[...n],[i]=t.splice(s,1);return t.splice(s-1,0,i),t})},children:e.jsx(k,{className:"h-3.5 w-3.5"})}),e.jsx(l,{type:"button",size:"icon",variant:"secondary",className:"h-7 w-7",onClick:()=>{s>=u.length-1||c(n=>{const t=[...n],[i]=t.splice(s,1);return t.splice(s+1,0,i),t})},children:e.jsx(D,{className:"h-3.5 w-3.5"})}),e.jsx(l,{type:"button",size:"icon",variant:"destructive",className:"h-7 w-7",onClick:()=>c(n=>n.filter((t,i)=>i!==s)),children:e.jsx(S,{className:"h-3.5 w-3.5"})})]})]},`edit-${s}`))})]})]}),e.jsxs(ie,{children:[e.jsx(l,{type:"button",variant:"ghost",onClick:()=>g(null),children:"Cancel"}),e.jsx(l,{type:"submit",children:"Save changes"})]})]})]})}),e.jsx(O,{open:P!==null,onOpenChange:a=>{a||w(null)},children:e.jsxs(q,{children:[e.jsxs(H,{children:[e.jsx(R,{children:"Delete this news?"}),e.jsx(V,{children:"This action cannot be undone. This will permanently delete the news and its related data."})]}),e.jsxs(B,{children:[e.jsx(K,{onClick:()=>w(null),children:"Cancel"}),e.jsx(Y,{onClick:()=>{P!==null&&d.delete(`/admin/news/${P}`,{onSuccess:()=>{w(null),d.reload({only:["posts","totalPosts"]})}})},children:"Delete"})]})]})}),e.jsx(O,{open:L!==null,onOpenChange:a=>{a||f(null)},children:e.jsxs(q,{children:[e.jsxs(H,{children:[e.jsx(R,{children:"Archive this news?"}),e.jsx(V,{children:"This news will be hidden from the public news page but will remain visible in the admin dashboard with an archived label."})]}),e.jsxs(B,{children:[e.jsx(K,{onClick:()=>f(null),children:"Cancel"}),e.jsx(Y,{onClick:()=>{L!==null&&d.post(`/admin/news/${L}/archive`,{},{onSuccess:()=>{f(null),d.reload({only:["posts","totalPosts"]})}})},children:"Archive"})]})]})}),e.jsx(O,{open:$!==null,onOpenChange:a=>{a||v(null)},children:e.jsxs(q,{children:[e.jsxs(H,{children:[e.jsx(R,{children:"Unarchive this news?"}),e.jsx(V,{children:"This news will be made visible on the public news page again."})]}),e.jsxs(B,{children:[e.jsx(K,{onClick:()=>v(null),children:"Cancel"}),e.jsx(Y,{onClick:()=>{$!==null&&d.post(`/admin/news/${$}/unarchive`,{},{onSuccess:()=>{v(null),d.reload({only:["posts","totalPosts"]})}})},children:"Unarchive"})]})]})})]})]})}export{ns as default};
