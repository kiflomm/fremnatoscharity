import{j as e,a as g,u as D,L as k,b as F,r as f}from"./app-wVpjM_Nk.js";import{A as _,N as I}from"./NewsLayout-D2wpa6H9.js";import{u as M}from"./useTranslations-BSgbcLx1.js";import{l as U,S as B,c as E}from"./index-DbiTmUHL.js";import{A as R}from"./AttachmentsCarousel-W7n-m-cy.js";import{C as S}from"./calendar-Ccyl5jZg.js";import{M as b}from"./message-square-Ci_Kvfwa.js";import{H as j}from"./heart-CsAA20Wh.js";import{l as T}from"./index-CFm55Yc-.js";import{U as H}from"./user-D6mZ1ceA.js";import{N as v}from"./index-B_IgmGSB.js";import{u as z}from"./Footer-BRzqHjls.js";/* empty css            */import"./alert-dialog-DunxIUdu.js";import"./index-BY0DeOZ3.js";import"./textarea-BqUX4hsj.js";import"./search-Cx-7Ya6m.js";import"./index-ii9NU5RA.js";import"./card-CGZKi39q.js";import"./select-RPATrJT9.js";import"./mail-BYldFupc.js";import"./separator-Bi-oZ122.js";function W({news:t,onBackToList:s,showBackButton:l=!1}){const d=()=>{g.post(U({news:t.id}).url)};return e.jsxs("div",{className:"w-full max-w-full",children:[l&&s&&e.jsx("div",{className:"lg:hidden p-4",children:e.jsxs("button",{onClick:s,className:"inline-flex items-center text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300",children:[e.jsx(_,{className:"h-4 w-4 mr-2"}),"Back to News"]})}),e.jsxs("article",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-sm border border-gray-200 dark:border-slate-700 overflow-hidden mx-4 sm:mx-6 lg:mx-8 max-w-full",children:[e.jsx(R,{title:t.title,images:t.attachments?.images,videos:t.attachments?.videos}),e.jsxs("div",{className:"p-6 lg:p-8",children:[e.jsxs("header",{className:"mb-6 lg:mb-8",children:[e.jsx("h1",{className:"text-2xl lg:text-3xl font-bold text-gray-900 dark:text-white mb-4",children:t.title}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-500 dark:text-gray-400 mb-6",children:[t.createdAt&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(S,{className:"h-4 w-4 mr-2"}),new Date(t.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(b,{className:"h-4 w-4 mr-2"}),t.comments.length," comments"]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(j,{className:"h-4 w-4 mr-2"}),t.likesCount," likes"]})]})]}),e.jsx("div",{className:"prose prose-lg max-w-none text-gray-700 dark:text-gray-300 prose-headings:text-gray-900 dark:prose-headings:text-white prose-a:text-blue-600 dark:prose-a:text-blue-400",dangerouslySetInnerHTML:{__html:t.description}}),e.jsx("div",{className:"mt-6 lg:mt-8 pt-6 border-t border-gray-200 dark:border-slate-700",children:e.jsxs("button",{onClick:d,className:`inline-flex items-center px-4 py-2 rounded-lg text-sm font-medium transition-colors ${t.isLiked?"bg-red-100 dark:bg-red-900/20 text-red-700 dark:text-red-400 hover:bg-red-200 dark:hover:bg-red-900/30":"bg-gray-100 dark:bg-slate-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-slate-600"}`,children:[e.jsx(j,{className:`h-4 w-4 mr-2 ${t.isLiked?"fill-current":""}`}),t.isLiked?"Unlike":"Like"," (",t.likesCount,")"]})})]})]})]})}function V({newsId:t,comments:s,isLoggedIn:l,onCommentSubmitted:d}){const{data:n,setData:m,post:o,processing:x,reset:a}=D({comment:""}),h=c=>{c.preventDefault(),o(E({news:t}).url,{onSuccess:()=>{a("comment"),d?d():g.reload()}})};return e.jsx("section",{className:"mt-8 lg:mt-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-sm border border-gray-200 dark:border-slate-700 p-6 lg:p-8",children:[e.jsxs("h2",{className:"text-xl lg:text-2xl font-bold text-gray-900 dark:text-white mb-6 flex items-center",children:[e.jsx(b,{className:"h-5 w-5 lg:h-6 lg:w-6 mr-3 text-blue-600"}),"Comments (",s.length,")"]}),l?e.jsx("form",{onSubmit:h,className:"mb-6 lg:mb-8",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx("div",{className:"flex-1",children:e.jsx("textarea",{className:"w-full rounded-lg border border-gray-300 dark:border-slate-600 px-4 py-3 text-sm bg-white dark:bg-slate-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",rows:3,value:n.comment,onChange:c=>m("comment",c.target.value),placeholder:"Write a comment...",required:!0})}),e.jsxs("button",{type:"submit",className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center sm:justify-start",disabled:x||!n.comment.trim(),children:[e.jsx(B,{className:"h-4 w-4 mr-2"}),x?"Posting...":"Post"]})]})}):e.jsx("div",{className:"mb-6 lg:mb-8 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:e.jsxs("p",{className:"text-blue-800 dark:text-blue-300",children:["Please ",e.jsx(k,{href:T().url,className:"font-medium underline hover:no-underline",children:"login"})," to comment."]})}),s.length===0?e.jsxs("div",{className:"text-center py-6 lg:py-8 text-gray-500 dark:text-gray-400",children:[e.jsx(b,{className:"h-10 w-10 lg:h-12 lg:w-12 mx-auto mb-3 text-gray-300 dark:text-gray-600"}),e.jsx("p",{children:"No comments yet. Be the first to comment!"})]}):e.jsx("div",{className:"space-y-4 lg:space-y-6",children:s.map(c=>e.jsxs("div",{className:"flex gap-3 lg:gap-4",children:[e.jsx("div",{className:"w-8 h-8 lg:w-10 lg:h-10 bg-blue-100 dark:bg-blue-900/20 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(H,{className:"h-4 w-4 lg:h-5 lg:w-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:c.author.name}),c.createdAt&&e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:new Date(c.createdAt).toLocaleDateString()})]}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:c.text})]})]},c.id))})]})})}function G({news:t,onSelect:s}){const l=()=>{const n=t.attachments?.images??[],m=t.attachments?.videos??[],o=[...n.map(a=>({type:"image",order:a.order,data:a})),...m.map(a=>({type:"video",order:a.order,data:a}))].sort((a,h)=>a.order-h.order);if(o.length===0)return null;const x=o[0];return x.type==="image"?e.jsx("div",{className:"aspect-video bg-gray-100 dark:bg-slate-700 overflow-hidden",children:e.jsx("img",{src:x.data.url,alt:t.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300",style:{maxWidth:"100%",height:"auto"}})}):e.jsx("div",{className:"aspect-video bg-gray-100 dark:bg-slate-700 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-600 rounded-full flex items-center justify-center mb-2",children:e.jsx("svg",{className:"w-6 h-6 text-white ml-1",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M8 5v14l11-7z"})})}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Video Content"})]})})},d=(t.attachments?.images?.length??0)+(t.attachments?.videos?.length??0);return e.jsx("article",{className:"group bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-gray-200 dark:border-slate-700 overflow-hidden hover:shadow-md transition-all max-w-full",children:e.jsxs("button",{onClick:()=>s(t.id),className:"block w-full text-left",children:[l(),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"mb-2 flex items-center justify-between",children:e.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-gray-100 dark:bg-slate-700 text-gray-700 dark:text-gray-300 capitalize",children:[d," attachments"]})}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3 line-clamp-2",children:t.title}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4 line-clamp-3",children:t.description}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500 dark:text-gray-400",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(b,{className:"h-4 w-4 mr-1"}),t.commentsCount]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(j,{className:"h-4 w-4 mr-1"}),t.likesCount]})]}),t.createdAt&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(S,{className:"h-4 w-4 mr-1"}),new Date(t.createdAt).toLocaleDateString()]})]})]})]})})}function C({isMobile:t=!1}){return t?e.jsxs("div",{className:"text-center py-12 px-4",children:[e.jsx(v,{className:"h-16 w-16 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No news yet"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Check back later for updates."})]}):e.jsx("div",{className:"hidden lg:flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center max-w-md",children:[e.jsx(v,{className:"h-16 w-16 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"No News Available"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Check back later for the latest news and updates."})]})})}function J({links:t}){return!t||t.length<=3?null:e.jsx("div",{className:"mt-8 flex justify-center px-4",children:e.jsx("nav",{className:"flex space-x-2",children:t.map((s,l)=>e.jsx(k,{href:s.url||"#",className:`px-3 py-2 text-sm font-medium rounded-md ${s.active?"bg-blue-600 text-white":"bg-white dark:bg-slate-800 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-slate-600 hover:bg-gray-50 dark:hover:bg-slate-700"} ${s.url?"":"opacity-50 cursor-not-allowed"}`,dangerouslySetInnerHTML:{__html:s.label}},l))})})}function K({items:t,onNewsSelect:s,paginationLinks:l}){return t.length===0?e.jsx(C,{isMobile:!0}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-4 space-y-4",children:t.map(d=>e.jsx(G,{news:d,onSelect:s},d.id))}),l&&e.jsx(J,{links:l})]})}function fe(){const{t}=z(),{i18n:s}=M(),{props:l}=F(),{auth:d,recentNews:n,popularNews:m,selectedNews:o}=l,x=!!d?.user,[a,h]=f.useState(o?.id||(l.filters?.selected?parseInt(l.filters.selected||"0"):void 0)),[c,N]=f.useState("list");f.useEffect(()=>{if(!a&&n?.data.length&&n.data.length>0){const r=n.data[0].id;h(r),window.innerWidth>=1024&&N("detail")}},[n?.data,a]),f.useEffect(()=>{s.changeLanguage("en")},[s]);const y=r=>{h(r),N("detail");const i=new URLSearchParams(window.location.search);i.set("selected",r.toString()),g.visit(`/news?${i.toString()}`,{preserveScroll:!0,preserveState:!0})},L=()=>{N("list"),h(void 0);const r=new URLSearchParams(window.location.search);r.delete("selected");const i=r.toString();g.visit(`/news${i?`?${i}`:""}`,{preserveScroll:!0,preserveState:!0})},A=()=>{g.reload()},P=r=>{const i=new URLSearchParams(window.location.search);i.delete("recent_page"),i.delete("popular_page"),r.q?i.set("q",r.q):i.delete("q");const p=i.toString();g.visit(`/news${p?`?${p}`:""}`)},$=(r,i)=>{const p=new URLSearchParams(window.location.search);r==="recent"?p.set("recent_page",i.toString()):p.set("popular_page",i.toString());const q=p.toString();g.visit(`/news?${q}`,{preserveScroll:!0,preserveState:!0})},w=o||(a?n?.data.find(r=>r.id===a)||m?.data.find(r=>r.id===a):null),u=w?{...w,comments:o?.comments||[],isLiked:o?.isLiked||!1}:null;return e.jsx(I,{title:u?u.title:"News",recentNews:n,popularNews:m,selectedNewsId:a,onNewsSelect:y,filters:l.filters,onFilterChange:P,onPageChange:$,showFilters:!0,hideFooter:!0,children:c==="detail"&&u?e.jsxs(e.Fragment,{children:[e.jsx(W,{news:u,onBackToList:L,showBackButton:!0}),e.jsx(V,{newsId:u.id,comments:u.comments,isLoggedIn:x,onCommentSubmitted:A})]}):e.jsxs(e.Fragment,{children:[!n?.data.length&&!m?.data.length&&e.jsx(C,{}),e.jsx("div",{className:"lg:hidden",children:e.jsx(K,{items:n?.data||[],onNewsSelect:y,paginationLinks:[]})})]})})}export{fe as default};
