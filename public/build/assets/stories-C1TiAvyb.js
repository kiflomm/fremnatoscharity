import{r as o,u as fe,j as e,H as ve,a as d}from"./app-zc_fY38o.js";import{C as Z,a as ee,b as se,c as te,d as Ne}from"./card-DEA19_cf.js";import{B as l}from"./index-C6yoGVDQ.js";import{I as C,L as p}from"./label-CwNMtWsZ.js";import{A as be,D as we,a as Ce,b as _e,d as _}from"./app-layout-CHlw5K70.js";import{D as re,a as ae,b as ie,c as le,d as ne}from"./dialog-0qO24oDS.js";import{A as q,a as O,b as H,c as R,d as V,e as B,f as K,g as Y}from"./alert-dialog-BGzvTE9f.js";import{T as ce}from"./textarea-DB5fC5-H.js";import{P as ke,E as Se}from"./plus-BzfhXckU.js";import{N as De}from"./index-Cdelqf7C.js";import{S as Ae}from"./search-Cc03KBlE.js";import{U as Ie}from"./user-C4jb4WjV.js";import{C as Ee}from"./calendar-Ocqf8LnM.js";import{H as Te}from"./heart-_-GJM4jm.js";import{M as Ue}from"./message-square-B-co0qhl.js";import{I as oe}from"./image-Df4D4Otf.js";import{U as de,A as k,a as S,V as me,C as he}from"./video-ChhVXe4w.js";import{T as D}from"./trash-2-dgue_p6e.js";/* empty css            */import"./index-B38z0XQv.js";import"./avatar-Cg7you8p.js";import"./index-DFX9K-tf.js";import"./log-out-DYHZBPWz.js";const ze=[{title:"Dashboard",href:"/admin/dashboard"},{title:"Stories",href:"/admin/stories"}];function is({posts:Q,totalPosts:W}){const A=Array.isArray(Q)?Q:[],ue=typeof W=="number"?W:A.length,[pe,U]=o.useState(!1),[z,j]=o.useState(null),[P,y]=o.useState(null),[L,f]=o.useState(null),[$,v]=o.useState(null),{data:n,setData:g,post:Pe,processing:F,reset:xe,errors:u,clearErrors:ge}=fe({story_title:"",story_description:"",category:""}),[N,m]=o.useState([]),[I,h]=o.useState([]),[G,b]=o.useState([]),[E,w]=o.useState([]),[x,c]=o.useState([]),J=o.useMemo(()=>!!(n.story_title?.trim()?.length>0&&n.story_description?.trim()?.length>0&&!!n.category),[n]),M=()=>{U(!1),ge(),xe("story_title","story_description","category"),m([]),h([]),c([])},[T,je]=o.useState(""),X=o.useMemo(()=>{if(!T.trim())return A;const r=T.toLowerCase();return A.filter(s=>s.title.toLowerCase().includes(r)||s.content.toLowerCase().includes(r)||(s.author?.name||"").toLowerCase().includes(r)||s.category.toLowerCase().includes(r))},[A,T]),ye=(r,s)=>r.length<=s?r:r.substring(0,s)+"...";return e.jsxs(be,{breadcrumbs:ze,children:[e.jsx(ve,{title:"Admin - Stories"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 p-4 sm:p-6",children:[e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Stories Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage stories"})]}),e.jsxs(l,{className:"w-full sm:w-auto",onClick:()=>U(!0),children:[e.jsx(ke,{className:"mr-2 h-4 w-4"}),"Add story"]})]}),e.jsx("div",{className:"grid gap-4 md:grid-cols-3",children:e.jsxs(Z,{children:[e.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(se,{className:"text-sm font-medium",children:"Total Stories"}),e.jsx(De,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(te,{children:[e.jsx("div",{className:"text-2xl font-bold",children:ue}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"All stories"})]})]})}),e.jsxs(Z,{children:[e.jsxs(ee,{children:[e.jsx(se,{children:"Stories"}),e.jsx(Ne,{children:"Manage beneficiary impact stories"}),e.jsx("div",{className:"flex items-center gap-2 max-sm:flex-col sm:justify-between",children:e.jsxs("div",{className:"relative w-full sm:w-auto",children:[e.jsx(Ae,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(C,{placeholder:"Search by title, content, author, category...",className:"pl-8 w-full sm:w-[300px]",value:T,onChange:r=>je(r.target.value)})]})})]}),e.jsx(te,{children:e.jsxs("div",{className:"space-y-4",children:[X.length===0?e.jsx("div",{className:"text-sm text-muted-foreground p-4 border rounded-md",children:"No stories match your search."}):null,X.map(r=>e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start justify-between gap-3 p-4 border rounded-lg hover:bg-muted/50 transition-colors",children:[e.jsx("div",{className:"flex items-start gap-4 flex-1",children:e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("h3",{className:"font-medium text-lg",children:r.title}),r.archived&&e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",children:"Archived"}),e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",children:r.category})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:ye(r.excerpt||r.content,150)}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ie,{className:"mr-1 h-3 w-3"}),r.author?.name||"Unknown"]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ee,{className:"mr-1 h-3 w-3"}),r.published_at?new Date(r.published_at).toLocaleDateString():new Date(r.created_at).toLocaleDateString()]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Te,{className:"mr-1 h-3 w-3"}),r.likes_count??0," likes"]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ue,{className:"mr-1 h-3 w-3"}),r.comments_count," comments"]})]})]})}),e.jsxs("div",{className:"flex sm:hidden w-full justify-around",children:[e.jsx(l,{variant:"outline",size:"sm",onClick:()=>d.get(`/admin/stories/${r.id}`),children:"View"}),e.jsx(l,{variant:"outline",size:"sm",onClick:()=>{j(r.id),g({...n,story_title:r.title,story_description:r.content,category:r.category});const s=(r.attachments?.images??[]).slice().sort((a,t)=>a.order-t.order);b(s.map(a=>a.id)),w(s.map(a=>a.url)),h([]),m([]),c((r.attachments?.videos??[]).slice().sort((a,t)=>a.order-t.order).map(a=>a.embedUrl))},children:"Edit"}),r.archived?e.jsx(l,{variant:"outline",size:"sm",onClick:()=>v(r.id),children:"Unarchive"}):e.jsx(l,{variant:"outline",size:"sm",onClick:()=>f(r.id),children:"Archive"}),e.jsx(l,{variant:"destructive",size:"sm",onClick:()=>y(r.id),children:"Delete"})]}),e.jsx("div",{className:"hidden sm:block",children:e.jsxs(we,{children:[e.jsx(Ce,{asChild:!0,children:e.jsx(l,{variant:"ghost",className:"h-8 w-8 p-0",children:e.jsx(Se,{className:"h-4 w-4"})})}),e.jsxs(_e,{align:"end",children:[e.jsx(_,{onClick:()=>d.get(`/admin/stories/${r.id}`),children:"View Story"}),e.jsx(_,{onClick:()=>{j(r.id),g({...n,story_title:r.title,story_description:r.content,category:r.category});const s=(r.attachments?.images??[]).slice().sort((a,t)=>a.order-t.order);b(s.map(a=>a.id)),w(s.map(a=>a.url)),h([]),m([]),c((r.attachments?.videos??[]).slice().sort((a,t)=>a.order-t.order).map(a=>a.embedUrl))},children:"Edit Story"}),r.archived?e.jsx(_,{onClick:()=>v(r.id),children:"Unarchive Story"}):e.jsx(_,{onClick:()=>f(r.id),children:"Archive Story"}),e.jsx(_,{className:"text-red-600",onClick:()=>y(r.id),children:"Delete Story"})]})]})})]},r.id))]})})]}),e.jsx(re,{open:pe,onOpenChange:r=>{r?U(!0):M()},children:e.jsxs(ae,{className:"sm:max-w-3xl max-h-[85vh] overflow-y-auto",children:[e.jsx(ie,{children:e.jsx(le,{children:"Add story"})}),e.jsxs("form",{className:"space-y-4",onSubmit:r=>{if(r.preventDefault(),!J)return;const s=new FormData;s.append("story_title",n.story_title),s.append("story_description",n.story_description),s.append("category",n.category),N.forEach((a,t)=>{s.append("images[]",a)}),N.forEach((a,t)=>{s.append("images_order[]",String(t))}),x.forEach((a,t)=>{s.append("videos[]",a)}),x.forEach((a,t)=>{s.append("videos_order[]",String(t))}),d.post("/admin/stories",s,{onSuccess:()=>{M(),d.reload({only:["posts","totalPosts"]})}})},children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"story-title",children:"Title"}),e.jsx(C,{id:"story-title",value:n.story_title,onChange:r=>g("story_title",r.target.value),placeholder:"Enter a concise title",required:!0}),u.story_title?e.jsx("p",{className:"text-xs text-red-600",children:u.story_title}):null]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"story-content",children:"Content"}),e.jsx(ce,{id:"story-content",value:n.story_description,onChange:r=>g("story_description",r.target.value),placeholder:"Write the story content...",rows:6,required:!0}),u.story_description?e.jsx("p",{className:"text-xs text-red-600",children:u.story_description}):null]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"story-category",children:"Category"}),e.jsxs("select",{id:"story-category",className:"w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring",value:n.category,onChange:r=>g("category",r.target.value),required:!0,children:[e.jsx("option",{value:"",disabled:!0,children:"Select category"}),e.jsx("option",{value:"elders",children:"elders"}),e.jsx("option",{value:"childrens",children:"childrens"}),e.jsx("option",{value:"disabled",children:"disabled"})]}),u.category?e.jsx("p",{className:"text-xs text-red-600",children:String(u.category)}):null]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(oe,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(p,{className:"m-0",children:"Images"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"Upload one or more images"})]}),e.jsxs("div",{className:"rounded-lg border border-dashed p-4 text-center hover:bg-muted/30 transition cursor-pointer",onClick:()=>{document.getElementById("story-images-input")?.click()},children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 text-muted-foreground",children:[e.jsx(de,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm",children:"Click to choose files"})]}),e.jsx("input",{id:"story-images-input",type:"file",className:"hidden",accept:"image/*",multiple:!0,onChange:r=>{const s=Array.from(r.target.files||[]);if(s.length===0)return;m(t=>[...t,...s]);const a=s.map(t=>URL.createObjectURL(t));h(t=>[...t,...a])}})]}),I.length>0&&e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3",children:I.map((r,s)=>e.jsxs("div",{className:"relative group border rounded-lg overflow-hidden",children:[e.jsx("img",{src:r,alt:`preview-${s}`,className:"w-full h-32 object-cover"}),e.jsx("div",{className:"absolute left-2 top-2 text-[10px] font-medium px-1.5 py-0.5 rounded bg-black/60 text-white",children:s+1}),e.jsxs("div",{className:"absolute inset-x-0 bottom-0 p-1.5 flex items-center justify-between bg-gradient-to-t from-black/60 to-transparent opacity-0 group-hover:opacity-100 transition",children:[e.jsxs("div",{className:"flex gap-1",children:[e.jsx(l,{type:"button",size:"icon",variant:"secondary",className:"h-7 w-7",onClick:()=>{s<=0||(m(a=>{const t=[...a],[i]=t.splice(s,1);return t.splice(s-1,0,i),t}),h(a=>{const t=[...a],[i]=t.splice(s,1);return t.splice(s-1,0,i),t}))},children:e.jsx(k,{className:"h-3.5 w-3.5"})}),e.jsx(l,{type:"button",size:"icon",variant:"secondary",className:"h-7 w-7",onClick:()=>{s>=N.length-1||(m(a=>{const t=[...a],[i]=t.splice(s,1);return t.splice(s+1,0,i),t}),h(a=>{const t=[...a],[i]=t.splice(s,1);return t.splice(s+1,0,i),t}))},children:e.jsx(S,{className:"h-3.5 w-3.5"})})]}),e.jsx(l,{type:"button",size:"icon",variant:"destructive",className:"h-7 w-7",onClick:()=>{m(a=>a.filter((t,i)=>i!==s)),h(a=>a.filter((t,i)=>i!==s))},children:e.jsx(D,{className:"h-3.5 w-3.5"})})]})]},s))}),u.images&&e.jsx("p",{className:"text-xs text-red-600",children:String(u.images)})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(me,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(p,{className:"m-0",children:"YouTube videos"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"Paste one or more URLs"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(C,{placeholder:"https://youtube.com/watch?v=...",onKeyDown:r=>{const s=r.target;if(r.key==="Enter"){r.preventDefault();const a=s.value.trim();a&&(c(t=>[...t,a]),s.value="")}}}),e.jsxs(l,{type:"button",variant:"secondary",onClick:r=>{const s=r.currentTarget.previousSibling;if(s&&"value"in s){const a=s.value.trim();a&&(c(t=>[...t,a]),s.value="")}},children:[e.jsx(he,{className:"h-4 w-4 mr-1"})," Add"]})]}),x.length>0&&e.jsx("div",{className:"space-y-2 mt-1",children:x.map((r,s)=>e.jsxs("div",{className:"flex items-center gap-2 border rounded-md p-2",children:[e.jsx("div",{className:"text-[10px] font-medium px-1.5 py-0.5 rounded bg-muted",children:s+1}),e.jsx("div",{className:"flex-1 truncate text-sm",title:r,children:r}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(l,{type:"button",size:"icon",variant:"secondary",className:"h-7 w-7",onClick:()=>{s<=0||c(a=>{const t=[...a],[i]=t.splice(s,1);return t.splice(s-1,0,i),t})},children:e.jsx(k,{className:"h-3.5 w-3.5"})}),e.jsx(l,{type:"button",size:"icon",variant:"secondary",className:"h-7 w-7",onClick:()=>{s>=x.length-1||c(a=>{const t=[...a],[i]=t.splice(s,1);return t.splice(s+1,0,i),t})},children:e.jsx(S,{className:"h-3.5 w-3.5"})}),e.jsx(l,{type:"button",size:"icon",variant:"destructive",className:"h-7 w-7",onClick:()=>c(a=>a.filter((t,i)=>i!==s)),children:e.jsx(D,{className:"h-3.5 w-3.5"})})]})]},s))})]})]}),e.jsxs(ne,{children:[e.jsx(l,{type:"button",variant:"ghost",onClick:M,disabled:F,children:"Cancel"}),e.jsx(l,{type:"submit",disabled:!J||F,children:F?"Creating...":"Create story"})]})]})]})}),e.jsx(q,{open:P!==null,onOpenChange:r=>{r||y(null)},children:e.jsxs(O,{children:[e.jsxs(H,{children:[e.jsx(R,{children:"Delete this story?"}),e.jsx(V,{children:"This action cannot be undone. This will permanently delete the story and its related data."})]}),e.jsxs(B,{children:[e.jsx(K,{onClick:()=>y(null),children:"Cancel"}),e.jsx(Y,{onClick:()=>{P!==null&&d.delete(`/admin/stories/${P}`,{onSuccess:()=>{y(null),d.reload({only:["posts","totalPosts"]})}})},children:"Delete"})]})]})}),e.jsx(q,{open:L!==null,onOpenChange:r=>{r||f(null)},children:e.jsxs(O,{children:[e.jsxs(H,{children:[e.jsx(R,{children:"Archive this story?"}),e.jsx(V,{children:"This story will be hidden from the public page but will remain visible in the admin dashboard with an archived label."})]}),e.jsxs(B,{children:[e.jsx(K,{onClick:()=>f(null),children:"Cancel"}),e.jsx(Y,{onClick:()=>{L!==null&&d.post(`/admin/stories/${L}/archive`,{},{onSuccess:()=>{f(null),d.reload({only:["posts","totalPosts"]})}})},children:"Archive"})]})]})}),e.jsx(q,{open:$!==null,onOpenChange:r=>{r||v(null)},children:e.jsxs(O,{children:[e.jsxs(H,{children:[e.jsx(R,{children:"Unarchive this story?"}),e.jsx(V,{children:"This story will be made visible on the public page again."})]}),e.jsxs(B,{children:[e.jsx(K,{onClick:()=>v(null),children:"Cancel"}),e.jsx(Y,{onClick:()=>{$!==null&&d.post(`/admin/stories/${$}/unarchive`,{},{onSuccess:()=>{v(null),d.reload({only:["posts","totalPosts"]})}})},children:"Unarchive"})]})]})}),e.jsx(re,{open:z!==null,onOpenChange:r=>{r||j(null)},children:e.jsxs(ae,{className:"sm:max-w-3xl max-h-[85vh] overflow-y-auto",children:[e.jsx(ie,{children:e.jsx(le,{children:"Edit story"})}),e.jsxs("form",{className:"space-y-4",onSubmit:r=>{if(r.preventDefault(),z===null||!n.story_title.trim()||!n.story_description.trim()||!n.category)return;const s=new FormData;s.append("_method","put"),s.append("story_title",n.story_title),s.append("story_description",n.story_description),s.append("category",n.category),s.append("existing_images_provided","1"),G.forEach(a=>s.append("existing_image_ids[]",String(a))),G.forEach((a,t)=>s.append("existing_images_order[]",String(t))),N.forEach((a,t)=>{s.append("images[]",a),s.append("images_order[]",String(t))}),s.append("replace_videos","1"),x.forEach((a,t)=>{s.append("videos[]",a),s.append("videos_order[]",String(t))}),d.post(`/admin/stories/${z}`,s,{onSuccess:()=>{j(null),d.reload({only:["posts"]})}})},children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"story-title-edit",children:"Title"}),e.jsx(C,{id:"story-title-edit",value:n.story_title,onChange:r=>g("story_title",r.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"story-content-edit",children:"Content"}),e.jsx(ce,{id:"story-content-edit",value:n.story_description,onChange:r=>g("story_description",r.target.value),rows:6,required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"story-category-edit",children:"Category"}),e.jsxs("select",{id:"story-category-edit",className:"w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring",value:n.category,onChange:r=>g("category",r.target.value),required:!0,children:[e.jsx("option",{value:"",disabled:!0,children:"Select category"}),e.jsx("option",{value:"elders",children:"elders"}),e.jsx("option",{value:"childrens",children:"childrens"}),e.jsx("option",{value:"disabled",children:"disabled"})]})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Add images or videos to replace existing attachments. Leave empty to keep current attachments."}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(oe,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(p,{className:"m-0",children:"Images"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"Upload one or more images"})]}),e.jsxs("div",{className:"rounded-lg border border-dashed p-4 text-center hover:bg-muted/30 transition cursor-pointer",onClick:()=>{document.getElementById("story-images-input-edit")?.click()},children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 text-muted-foreground",children:[e.jsx(de,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm",children:"Click to choose files"})]}),e.jsx("input",{id:"story-images-input-edit",type:"file",className:"hidden",accept:"image/*",multiple:!0,onChange:r=>{const s=Array.from(r.target.files||[]);if(s.length===0)return;m(t=>[...t,...s]);const a=s.map(t=>URL.createObjectURL(t));h(t=>[...t,...a])}})]}),E.length>0&&e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3",children:E.map((r,s)=>e.jsxs("div",{className:"relative group border rounded-lg overflow-hidden",children:[e.jsx("img",{src:r,alt:`preview-${s}`,className:"w-full h-32 object-cover"}),e.jsx("div",{className:"absolute left-2 top-2 text-[10px] font-medium px-1.5 py-0.5 rounded bg-black/60 text-white",children:s+1}),e.jsxs("div",{className:"absolute inset-x-0 bottom-0 p-1.5 flex items-center justify-between bg-gradient-to-t from-black/60 to-transparent opacity-0 group-hover:opacity-100 transition",children:[e.jsxs("div",{className:"flex gap-1",children:[e.jsx(l,{type:"button",size:"icon",variant:"secondary",className:"h-7 w-7",onClick:()=>{s<=0||(w(a=>{const t=[...a],[i]=t.splice(s,1);return t.splice(s-1,0,i),t}),b(a=>{const t=[...a],[i]=t.splice(s,1);return t.splice(s-1,0,i),t}))},children:e.jsx(k,{className:"h-3.5 w-3.5"})}),e.jsx(l,{type:"button",size:"icon",variant:"secondary",className:"h-7 w-7",onClick:()=>{s>=E.length-1||(w(a=>{const t=[...a],[i]=t.splice(s,1);return t.splice(s+1,0,i),t}),b(a=>{const t=[...a],[i]=t.splice(s,1);return t.splice(s+1,0,i),t}))},children:e.jsx(S,{className:"h-3.5 w-3.5"})})]}),e.jsx(l,{type:"button",size:"icon",variant:"destructive",className:"h-7 w-7",onClick:()=>{w(a=>a.filter((t,i)=>i!==s)),b(a=>a.filter((t,i)=>i!==s))},children:e.jsx(D,{className:"h-3.5 w-3.5"})})]})]},`edit-${s}`))}),I.length>0&&e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3",children:I.map((r,s)=>e.jsxs("div",{className:"relative group border rounded-lg overflow-hidden",children:[e.jsx("img",{src:r,alt:`new-preview-${s}`,className:"w-full h-32 object-cover"}),e.jsx("div",{className:"absolute left-2 top-2 text-[10px] font-medium px-1.5 py-0.5 rounded bg-black/60 text-white",children:s+1+E.length}),e.jsxs("div",{className:"absolute inset-x-0 bottom-0 p-1.5 flex items-center justify-between bg-gradient-to-t from-black/60 to-transparent opacity-0 group-hover:opacity-100 transition",children:[e.jsxs("div",{className:"flex gap-1",children:[e.jsx(l,{type:"button",size:"icon",variant:"secondary",className:"h-7 w-7",onClick:()=>{s<=0||(m(a=>{const t=[...a],[i]=t.splice(s,1);return t.splice(s-1,0,i),t}),h(a=>{const t=[...a],[i]=t.splice(s,1);return t.splice(s-1,0,i),t}))},children:e.jsx(k,{className:"h-3.5 w-3.5"})}),e.jsx(l,{type:"button",size:"icon",variant:"secondary",className:"h-7 w-7",onClick:()=>{s>=N.length-1||(m(a=>{const t=[...a],[i]=t.splice(s,1);return t.splice(s+1,0,i),t}),h(a=>{const t=[...a],[i]=t.splice(s,1);return t.splice(s+1,0,i),t}))},children:e.jsx(S,{className:"h-3.5 w-3.5"})})]}),e.jsx(l,{type:"button",size:"icon",variant:"destructive",className:"h-7 w-7",onClick:()=>{m(a=>a.filter((t,i)=>i!==s)),h(a=>a.filter((t,i)=>i!==s))},children:e.jsx(D,{className:"h-3.5 w-3.5"})})]})]},`new-${s}`))}),u.images&&e.jsx("p",{className:"text-xs text-red-600",children:String(u.images)})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(me,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(p,{className:"m-0",children:"YouTube videos"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"Paste one or more URLs"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(C,{placeholder:"https://youtube.com/watch?v=...",onKeyDown:r=>{const s=r.target;if(r.key==="Enter"){r.preventDefault();const a=s.value.trim();a&&(c(t=>[...t,a]),s.value="")}}}),e.jsxs(l,{type:"button",variant:"secondary",onClick:r=>{const s=r.currentTarget.previousSibling;if(s&&"value"in s){const a=s.value.trim();a&&(c(t=>[...t,a]),s.value="")}},children:[e.jsx(he,{className:"h-4 w-4 mr-1"})," Add"]})]}),x.length>0&&e.jsx("div",{className:"space-y-2 mt-1",children:x.map((r,s)=>e.jsxs("div",{className:"flex items-center gap-2 border rounded-md p-2",children:[e.jsx("div",{className:"text-[10px] font-medium px-1.5 py-0.5 rounded bg-muted",children:s+1}),e.jsx("div",{className:"flex-1 truncate text-sm",title:r,children:r}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(l,{type:"button",size:"icon",variant:"secondary",className:"h-7 w-7",onClick:()=>{s<=0||c(a=>{const t=[...a],[i]=t.splice(s,1);return t.splice(s-1,0,i),t})},children:e.jsx(k,{className:"h-3.5 w-3.5"})}),e.jsx(l,{type:"button",size:"icon",variant:"secondary",className:"h-7 w-7",onClick:()=>{s>=x.length-1||c(a=>{const t=[...a],[i]=t.splice(s,1);return t.splice(s+1,0,i),t})},children:e.jsx(S,{className:"h-3.5 w-3.5"})}),e.jsx(l,{type:"button",size:"icon",variant:"destructive",className:"h-7 w-7",onClick:()=>c(a=>a.filter((t,i)=>i!==s)),children:e.jsx(D,{className:"h-3.5 w-3.5"})})]})]},`edit-${s}`))})]})]}),e.jsxs(ne,{children:[e.jsx(l,{type:"button",variant:"ghost",onClick:()=>j(null),children:"Cancel"}),e.jsx(l,{type:"submit",children:"Save changes"})]})]})]})})]})]})}export{is as default};
