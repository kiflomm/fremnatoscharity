import{b as S,u as _,j as r,L as b,a as H}from"./app-CH3-Qlzx.js";import{F as L}from"./FixedHeaderLayout-BNdEmq4g.js";import{q as a,b as h}from"./index-IOC02BLR.js";import{l as w}from"./index-X7ulyn1n.js";/* empty css            */import"./Footer-COOOBpKR.js";import"./card-DJ1eNunt.js";import"./select-BJlFNWtB.js";import"./index-B9eMk7ev.js";import"./index-DDrz1fMN.js";import"./mail-D4E9GK1A.js";import"./separator-CNp-1pTj.js";import"./alert-dialog-D21eq74Q.js";import"./textarea-wmbd1RAa.js";const o=e=>({url:o.url(e),method:"get"});o.definition={methods:["get","head"],url:"/stories"};o.url=e=>o.definition.url+a(e);o.get=e=>({url:o.url(e),method:"get"});o.head=e=>({url:o.url(e),method:"head"});const y=e=>({action:o.url(e),method:"get"});y.get=e=>({action:o.url(e),method:"get"});y.head=e=>({action:o.url({[e?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...e?.query??e?.mergeQuery??{}}}),method:"get"});o.form=y;const i=e=>({url:i.url(e),method:"get"});i.definition={methods:["get","head"],url:"/stories/elders"};i.url=e=>i.definition.url+a(e);i.get=e=>({url:i.url(e),method:"get"});i.head=e=>({url:i.url(e),method:"head"});const p=e=>({action:i.url(e),method:"get"});p.get=e=>({action:i.url(e),method:"get"});p.head=e=>({action:i.url({[e?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...e?.query??e?.mergeQuery??{}}}),method:"get"});i.form=p;const l=e=>({url:l.url(e),method:"get"});l.definition={methods:["get","head"],url:"/stories/childrens"};l.url=e=>l.definition.url+a(e);l.get=e=>({url:l.url(e),method:"get"});l.head=e=>({url:l.url(e),method:"head"});const f=e=>({action:l.url(e),method:"get"});f.get=e=>({action:l.url(e),method:"get"});f.head=e=>({action:l.url({[e?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...e?.query??e?.mergeQuery??{}}}),method:"get"});l.form=f;const m=e=>({url:m.url(e),method:"get"});m.definition={methods:["get","head"],url:"/stories/disabled"};m.url=e=>m.definition.url+a(e);m.get=e=>({url:m.url(e),method:"get"});m.head=e=>({url:m.url(e),method:"head"});const x=e=>({action:m.url(e),method:"get"});x.get=e=>({action:m.url(e),method:"get"});x.head=e=>({action:m.url({[e?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...e?.query??e?.mergeQuery??{}}}),method:"get"});m.form=x;const s=(e,t)=>({url:s.url(e,t),method:"get"});s.definition={methods:["get","head"],url:"/stories/{story}"};s.url=(e,t)=>{(typeof e=="string"||typeof e=="number")&&(e={story:e}),typeof e=="object"&&!Array.isArray(e)&&"id"in e&&(e={story:e.id}),Array.isArray(e)&&(e={story:e[0]}),e=h(e);const u={story:typeof e.story=="object"?e.story.id:e.story};return s.definition.url.replace("{story}",u.story.toString()).replace(/\/+$/,"")+a(t)};s.get=(e,t)=>({url:s.url(e,t),method:"get"});s.head=(e,t)=>({url:s.url(e,t),method:"head"});const g=(e,t)=>({action:s.url(e,t),method:"get"});g.get=(e,t)=>({action:s.url(e,t),method:"get"});g.head=(e,t)=>({action:s.url(e,{[t?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...t?.query??t?.mergeQuery??{}}}),method:"get"});s.form=g;const d=(e,t)=>({url:d.url(e,t),method:"post"});d.definition={methods:["post"],url:"/stories/{story}/comments"};d.url=(e,t)=>{(typeof e=="string"||typeof e=="number")&&(e={story:e}),typeof e=="object"&&!Array.isArray(e)&&"id"in e&&(e={story:e.id}),Array.isArray(e)&&(e={story:e[0]}),e=h(e);const u={story:typeof e.story=="object"?e.story.id:e.story};return d.definition.url.replace("{story}",u.story.toString()).replace(/\/+$/,"")+a(t)};d.post=(e,t)=>({url:d.url(e,t),method:"post"});const j=(e,t)=>({action:d.url(e,t),method:"post"});j.post=(e,t)=>({action:d.url(e,t),method:"post"});d.form=j;const n=(e,t)=>({url:n.url(e,t),method:"post"});n.definition={methods:["post"],url:"/stories/{story}/like"};n.url=(e,t)=>{(typeof e=="string"||typeof e=="number")&&(e={story:e}),typeof e=="object"&&!Array.isArray(e)&&"id"in e&&(e={story:e.id}),Array.isArray(e)&&(e={story:e[0]}),e=h(e);const u={story:typeof e.story=="object"?e.story.id:e.story};return n.definition.url.replace("{story}",u.story.toString()).replace(/\/+$/,"")+a(t)};n.post=(e,t)=>({url:n.url(e,t),method:"post"});const A=(e,t)=>({action:n.url(e,t),method:"post"});A.post=(e,t)=>({action:n.url(e,t),method:"post"});n.form=A;function K(){const{props:e}=S(),{story:t,auth:u}=e,{data:N,setData:Q,post:q,processing:k,reset:F}=_({comment:""}),v=!!u?.user,D=c=>{c.preventDefault(),q(d({story:t.id}).url,{onSuccess:()=>F("comment")})};return r.jsx(L,{title:t.title,children:r.jsx("div",{className:"container mx-auto px-4 py-8",children:r.jsxs("div",{className:"max-w-3xl mx-auto",children:[r.jsx(b,{href:o().url,className:"text-sm text-blue-600",children:"← Back"}),r.jsx("h1",{className:"text-2xl font-semibold mt-2",children:t.title}),r.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:["Beneficiary: ",t.beneficiary.name," (",t.beneficiary.ageGroup,", ",t.beneficiary.gender,")"]}),r.jsx("article",{className:"prose max-w-none mt-4",dangerouslySetInnerHTML:{__html:t.description}}),r.jsx("div",{className:"mt-6 flex items-center gap-4",children:r.jsxs("button",{onClick:()=>H.post(n({story:t.id}).url),className:"rounded border px-3 py-1 text-sm",children:[t.isLiked?"Unlike":"Like"," (",t.likesCount,")"]})}),r.jsxs("section",{className:"mt-8",children:[r.jsx("h2",{className:"text-lg font-medium",children:"Comments"}),v?r.jsxs("form",{onSubmit:D,className:"mt-3 flex gap-2",children:[r.jsx("input",{className:"flex-1 rounded border px-3 py-2",value:N.comment,onChange:c=>Q("comment",c.target.value),placeholder:"Write a comment"}),r.jsx("button",{className:"rounded bg-blue-600 text-white px-4",disabled:k,children:"Post"})]}):r.jsxs("p",{className:"mt-3 text-sm text-gray-600",children:["Please ",r.jsx(b,{href:w().url,className:"text-blue-600",children:"login"})," to comment."]}),r.jsx("ul",{className:"mt-4 space-y-3",children:t.comments.map(c=>r.jsxs("li",{className:"rounded border p-3",children:[r.jsx("div",{className:"text-sm text-gray-500",children:c.author.name}),r.jsx("div",{className:"mt-1",children:c.text})]},c.id))})]})]})})})}export{K as default};
